
<ui:composition template="/WEB-INF/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core">
	<ui:define name="content">
		<div class="row">
			<div class="col-md-2"></div>
			<div class="well well-lg col-md-8" id="messageContainer" style="overflow-y: scroll; max-height: 700px;">

				
				<input type="hidden" id="chatId" value="#{chatBean.chatId}" />
				<input type="hidden" id="hash" value="#{chatBean.hash}" />
				<input type="hidden" id="userName" value="#{helperBean.userName}" />

				<ui:repeat value="#{chatBean.messages}" var="message">
				
					<h:panelGroup rendered="#{helperBean.userName eq (helperBean.getUserName(message.userId))}">
		   				<div style="width: 50.1%; background: #e9ecef; border-radius: .3rem; padding-bottom: 5px; float: right; margin: 10px;">
		   					<div style="padding: 3px; width: 100%; background: #343a40; border-top-left-radius: .3rem; border-top-right-radius: .3rem;">
								<p style="color: #28a745; margin-bottom: 0px;">#{helperBean.getUserName(message.userId)}</p>
							</div>
			 				<p style="margin: 3px">#{message.text}</p> 
						</div>
					</h:panelGroup>
					<h:panelGroup rendered="#{helperBean.userName != message.userName}">
		   				<div style="width: 50.1%; background: #e9ecef; border-radius: .3rem; padding-bottom: 5px; float: left; margin: 10px;">
		   					<div style="padding: 3px; width: 100%; background: #343a40; border-top-left-radius: .3rem; border-top-right-radius: .3rem;">
								<p style="color: #28a745; margin-bottom: 0px;">#{helperBean.getUserName(message.userId)}</p>
							</div>
			 				<p style="margin: 3px">#{message.text}</p> 
						</div>
					</h:panelGroup>
				
				</ui:repeat>
			
				<div id="output"></div>
			
				<script type="text/javascript" src="resources/websocket.js"></script>
			</div>
			<div class="col-md-2"></div>
		</div>
	<div class="row">
		<div class="col-md-2"></div>
			<div class="well well-lg col-md-8">
				<input id="input" type="text"/>
				<button onclick="send()">Absenden</button>
			</div>
		<div class="col-md-2"></div>
	</div>
	</ui:define>
</ui:composition>
